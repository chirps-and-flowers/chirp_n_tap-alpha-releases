# Chirp'n TAP

**Chirp'n TAP** is a Flutter-based application that provides an interactive, modern take on the Commodore 64 cassette tape experience. It works by loading digitized cassette tapes in the  `.tap` format and handling them via a custom `.cpk` (Chirp Package) format, generated by the [`go_chirp_the_tap`](https://github.com/chirps-and-flowers/go_chirp_the_tap) interface.

This app emphasizes quality-of-life improvements throughout its design: clear block navigation, customizable playback behavior and searchable game library. It aims to preserve a retro feel while introducing modern comforts.

**Alpha Status** -  Chirp'n TAP is currently in Alpha. Expect bugs, incomplete features, and compatibility limitations. When Beta is reached the code base will be released.

## Download

### Direct Downloads (Latest Alpha Release)
- **Android**: [chirp_n_tap_android_0_1_0_alpha.apk](https://github.com/chirps-and-flowers/chirp_n_tap-alpha-releases/releases/download/0.1.0-alpha/chirp_n_tap_android_0_1_0_alpha.apk)
- **Linux x64**: [chirp_n_tap_linux_x64_0_1_0_alpha.zip](https://github.com/chirps-and-flowers/chirp_n_tap-alpha-releases/releases/download/0.1.0-alpha/chirp_n_tap_linux_x64_0_1_0_alpha.zip)

### All Releases
Visit the [releases page](https://github.com/chirps-and-flowers/chirp_n_tap-alpha-releases/releases) for all available versions and release notes.

---

## Table of Contents

1. [Core Features](#core-features)
2. [Usage](#usage)
3. [Settings](#settings)
4. [Release Channels](#release-channels)
5. [Project Status](#project-status)
6. [License](#license)

---

## Core Features

### `.tap` playback

Chirp'n TAP loads .tap files and through its backend has the data stream indexed and then presents this with a modern interface. The interface is designed to manage block-level (a stream of data followed by a pause) playback with options to seek, pause, and rename specific segments.

### Chirp Package (`.cpk`) Format

The app is optimized for the `.cpk` format, which is a structured archive produced by the `go_chirp_the_tap` backend. A `.cpk` package includes:

* `package_manifest.json`: Metadata including the original source `.tap` file, PAL/NTSC timing, and any playback overrides.
* `blocks.csv`: A list of blocks with detailed timings, block types (lead, data, pause), and optional user-defined tags.
* Individual `.wav` files: Each logical block from the original tape is separated into its own `.wav`, allowing for granular playback.

### Custom Playback Control

* **Pause with Resume**: Playback can be paused AFTER the specific block for a defined duration, then automatically resumed. This mimics behaviors seen in games that show an image or intro before continuing. It is useful for waiting out "Found ..." messages and in games that pause for a while during load to present a screen or an intro. Figure out how long you need to set the pause and you are good to go. 
* **Pause without Resume**: Playback halts BEFORE the specified block starts playig and requires the user to press play again for for the pause to end. It is useful for multi-load or menu-driven tapes. If blocks have been tagged with a name - maybe from an .idx file - then this is a normal place to also set a pause without resume. 
* **Block Naming**: Each block can be named for clarity, similar to `.idx`-style indexing. This is helpful for identifying where specific data segments begin. Think multi-load games or game collections, turbo-tape collections etc. 

### File Loading Methods

* **Game Search List**: Use a `.txt` file containing HTTP URLs or local file paths prefixed with `file:///` — one per line — to load `.tap` or `.cpk` files. Lines starting with `#` are used as a header for the following files.
* **Local Files**: Files can also be loaded from the device's storage via the file picker.

### Export Support

Any file you load can be exported as a new `.cpk` file. This lets you preserve your setup (block names, blocks combined etc). Maybe share with the community?

---

## Usage

### Loading files

* **From online list**: Tap the cloud icon. The search window lets you browse a list of `.tap` or `.cpk` files defined in your selected game list file.
* **From local storage**: Tap the folder icon to open the file picker. You can select either `.tap` files (converted to `.cpk` on-the-fly) or existing `.cpk` chirp packages.

### Playback controls

* **Play/Pause**: Toggles playback of the loaded tape.
* **Stop**: Resets playback.
* **Seek to Block**: Tapping a block in the list seeks to its position and pauses.
* **Combine Blocks**: Groups short consecutive "data" blocks into larger logical units to simplify navigation.
* **Volume Control**: Tap the volume icon to adjust. This value is saved and restored automatically.
* **Tape Counter**: This is currently just a gimmick - an accurate counter needs to be implemented.

### Exporting

* Tap the record/export icon to save the current `.cpk` package with any of your applied changes.

---

## Settings

Access the settings menu using the gear icon. All changes are persistently saved. 

| Setting                  | Description                                                                                                                                                                                                                                  |
| ------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **INVERT AUDIO**         | Inverts the polarity of audio output samples. If your C64 doesn't show a "FOUND ..." even after adjusting volume, this is the likely culprit.                                                                                                |
| **LEAD TONE AUTO-PAUSE** | Automatically pauses playback after the lead tone block finishes. Playback resumes automatically. Useful for games that wait for a screen or intro to finish displaying.                                                                     |
| **IN-MEMORY AUDIO**      | When enabled, all audio blocks are loaded into RAM. When disabled, `.wav` files are streamed from disk (using temporary files). This setting can reduce memory usage but wasn't found to significantly affect performance on tested devices. |
| **CLOCK STANDARD**       | Select between PAL and NTSC clock timing. Impacts playback rates and synchronization.                                                                                                                                                        |
| **CACHE SIZE**           | Limits how many `.cpk` files are kept in local app cache. Older files are deleted when the limit is reached.                                                                                                                                 |
| **CLEAR CACHE**          | Deletes all cached `.cpk` packages from local storage.                                                                                                                                                                                       |
| **EXPORT LOGS**          | Allows export of internal logs, optionally redacted to remove full file paths. Useful for debugging or submitting issue reports.                                                                                                             |
| **GAME LIST SOURCE**     | Selects the `.txt` file used for online game browsing. Can be reset to the bundled default. Each line must be a URL or local file path. Lines beginning with `#` are treated as headers or labels.                                           |

---

## Release Channels

### Alpha

This is the current release channel. Focus is on:

* Refactoring internals for maintainability
* Fixing critical issues
* Adding Windows support

---

## Project Status

* **Stage**: Alpha — features are still evolving and breaking changes are likely
* **Tested Platforms**: Android and Linux
* **Planned Support**: Windows (in beta)

---

## License

This project is licensed under the terms described in the [LICENSE](LICENSE) file.
